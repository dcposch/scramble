<!DOCTYPE html>
<html>
<head>
    <title>Scramble.io</title>
    <link rel="stylesheet" href="/css/style.css"></link>
</head>
<body>
<div id="wrapper"></div>


<!-- LOGIN -->
<script id="login-template" type="text/x-handlebars-template">
<div id="login">
    <h1>Scramble</h1>
    <h3>Encrypted email for everyone</h3>

    <div class="prompt"><label>User</label><input type="text" id="token"></input></div>
    <div class="prompt"><label>Passphrase</label><input type="password" id="pass"></input></div>
    <div><input type="submit" id="enterButton" value="Log In"></input></div>

    <div class="strike"><hr /><span>or</span><hr /></div>

    <input type="submit" id="generateButton" value="Generate Account"></input>

    <div class="footer">
        <a href="http://dcposch.github.com/scramble">How it works</a>
        <p>
            Questions? Feedback? Just testing a new account?
        </p>
        <p>
             Send us a note! To: hello@scramble.io 
        </p>
    </div>

    <a href="https://github.com/dcposch/scramble"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>

</div>
</script>



<!-- CREATE ACCOUNT MODAL -->
<script id="create-account-template" type="text/x-handlebars-template">
<div class="modal-bg">
<div class="modal" id="createAccountModal">
    <div id="spinner">
        <h2>Generating PGP keys...</h2>
        <img src="spinner.gif" />
    </div>

    <section id="createForm">
        <h2>Welcome to Scramble!</h2>
        <div class="prompt"><label>User</label><input type="text" id="createToken"></input></div>
        <div class="prompt"><label>Passphrase</label><input type="password" id="createPass"></input></div>
        <div class="prompt"><label>Confirm passphrase</label><input type="password" id="confirmPass"></input></div>
        <p class="hint">Please choose a strong passphrase and don't forget it.<br/>
        The server won't know your passphrase or your private key. It can't read your mail.<br/>
        This is sweet... but it also means that "password reset" is impossible!</p>
        <div class="prompt"><label>Optional other email</label><input type="text" id="secondaryEmail"></input></div>
        <p class="hint">If you give us your other email, we'll keep you updated on our progress.<br/>
        We'll also remind you to check Scramble when you receive messages.</p>
        <div><input type="submit" id="createButton" value="Create Account"></input></div>
    </section>
</div>
</div>
</script>



<!-- PAGE STRUCTURE -->
<script id="page-template" type="text/x-handlebars-template">
    <div class="navbar navbar-inverse">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Project name</a>
            </div>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li class="active"><a id="tab-compose" href="#" class="tab">Compose</a></li>
                    <li><a id="tab-inbox" href="#" class="tab">Inbox</a></li>
                    <li><a id="tab-sent" href="#" class="tab">Sent</a></li>
                    <li><a id="tab-archive" href="#" class="tab">Archive</a></li>
                    <li><a id="tab-contacts" href="#" class="tab">Contacts</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="container">
        <div id="sidebar" class="col-md-4 sidebar">
{{!--             <div class="panel panel-default">
                <div class="panel-heading">
                    <div class="warning" id="warningBar"></div>
                    <div class="welcome">Welcome, {{token}}. <a href="/" id="link-logout" class="pull-right">Log Out</a></div>
                </div>
                <div class="panel-body">
                    <code>{{emailAddress}}<br/>
                    #{{pubHash}}</code>
                </div>
            </div> --}}
            {{!-- <a href="#" id="link-kb-shortcuts" class="hint">Keyboard shortcuts available</a> --}}
            <div class="lead capitalize">{{box}}</div class="lead">
            <div id="inbox" class="box"></div>
            <div id="sent" class="box"></div>
            <div id="archive" class="box"></div>

        </div>
        <div class="col-md-7 col-md-push-4 main-panel">
            <div id="statusBar"></div>
            <div id="content"></div>
        </div>
    </div>
</script>


<!-- BOX -->
<script id="box-template" type="text/x-handlebars-template">
{{> box-pagination-partial}}
<div class="js-box-items list-group">
    {{#each emailHeaders}}
        {{!-- data-msg-id becomes .data("msgID") --}}
        <a class="js-box-item list-group-item"
            data-msg-id="{{MessageID}}"
            data-thread-id="{{ThreadID}}"
            data-time="{{UnixTime}}"
            data-from="{{From}}"
            data-to="{{To}}">{{Subject}}</a>
    {{/each}}
</div>
{{> box-pagination-partial}}
</script>

<script id="box-pagination-partial" type="text/x-handlebars-template">
<div class="box-pagination">
{{#ifCond totalPages '>' 1}}
    {{#ifCond 1 '<' page}}
        <a href="#" data-page="0">&#171;</a>
    {{/ifCond}}
    {{#each pages}}
        {{#ifCond ../page '==' page}}
            <span class="page-link page-current">{{page}}</span>
        {{else}}
            <a class="page-link" href="#" data-page="{{page}}" data-box="{{../../box}}">{{page}}</a>
        {{/ifCond}}
    {{/each}}
    {{#ifCond page '<' totalPages}}
        <a href="#" data-page="{{totalPages}}">&#187;</a>
    {{/ifCond}}
{{/ifCond}}
</div>
</script>



<!-- THREAD (MANY EMAILS) -->
<script id="thread-template" type="text/x-handlebars-template">
<div id="thread" data-thread-id="{{threadID}}">
    <div id="thread-subject">
        <div class="lead">{{subject}}</div class="lead">
    </div>
    <div id="thread-emails">
    </div>

    <div class="btn-group">
        <button typ="button" class="btn btn-default">Reply</button>
        <button typ="button" class="btn btn-default">Reply All</button>
        <button typ="button" class="btn btn-default">Forward</button>
        {{#ifCond box '==' "inbox"}}
        <button typ="button" class="btn btn-default">Archive</button>
        {{/ifCond}}
        {{#ifCond box '==' "archive"}}
        <button typ="button" class="btn btn-default">Move to Inbox</button>
        {{/ifCond}}
        <button typ="button" class="btn btn-default">Delete</button>
    </div>

</div>
</script>


<!-- SINGLE EMAIL -->
<script id="email-template" type="text/x-handlebars-template">
{{!--
    This parent level div class "email" is functionally important.
    For example, the buttons (ie replyButton, forwardButton) work
     by finding the context email data by .closest(".email").data("email").
--}}
<div class="js-email panel panel-default" data-msg-id="{{msgID}}">
    <div class="panel-heading">
        <small class="received pull-right">{{formatDate time format="MMM D YYYY, hh:mm"}}</small>
        <div class="from">
            {{> email-address-partial fromAddress}}
        </div>
        <small class="to">to 
            {{#each toAddresses}}
                {{> email-address-partial}}
            {{/each}}
        </small>
    </div>
    {{!--
    <div class="emailControl controlButtons">
        <button class="replyButton">Reply</button>
        <button class="replyAllButton">Reply All</button>
        <button class="forwardButton">Forward</button>
        {{#ifCond _box '==' "inbox"}}
        <button class="archiveButton">Archive</button>
        {{/ifCond}}
        {{#ifCond _box '==' "archive"}}
        <button class="moveToInboxButton">Move to Inbox</button>
        {{/ifCond}}
        <button class="deleteButton">Delete</button>
    </div>
    --}}
    <div class="body panel-body">{{{htmlBody}}}</div>

    {{!-- This is where the compose box goes when replying/forwarding this email --}}
    <div class="email-compose">
    </div>
</div>
</script>

<script id="email-address-partial" type="text/x-handlebars-template">
    {{#if name}}
        <span class="addr-name">{{name}}</span>
        <span class="addr named">{{address}}</span>
    {{else}}
        <span class="addr noname"><a href="#" data-addr="{{address}}" class="enterAddContactButton">{{address}}</a></span>
    {{/if}}
</script>


<!-- COMPOSE -->
<script id="compose-template" type="text/x-handlebars-template">
{{!-- <div class="compose {{#if inline}}inline{{/if}}">
    <input type="hidden" name="ancestorIDs" value="{{ancestorIDs}}"/>
    <input type="hidden" name="threadID" value="{{threadID}}"/>

    <div class="prompt"><label for="to">To</label><input type="text" name="to" value="{{to}}"></span></div>
    <div><span class="hint">Contact names allowed, eg "bob@scramble.io, joe, me"</span></div>

    {{#if inline}}
    <input type="hidden" name="subject" value="{{subject}}"/>
    {{else}}
    <div class="prompt"><label for="subject">Subject</label><input type="text" name="subject" value="{{subject}}"></span></div>
    {{/if}}
    <div class="prompt"><label for="to">To</label><input type="text" name="to" value="{{to}}"></span></div>
    <div><label>&nbsp;</label><span class="hint">Contact names allowed, eg "bob@scramble.io, joe, me"</span></div>
    <textarea name="body" data-default="{{bodyDefault}}" data-display-name="Body">{{body}}</textarea>
    <input type="submit" class="sendButton" value="Send"></input>
</div>
 --}}
<div>
    {{#if inline}}
    <input type="hidden" name="subject" value="{{subject}}"/>
    {{else}}
    <input type="text" name="subject" value="{{subject}}" class="invis-input lead" placeholder="Subject"/>
    {{/if}}
    <div class="panel panel-default">
        <input type="hidden" name="ancestorIDs" value="{{ancestorIDs}}"/>
        <input type="hidden" name="threadID" value="{{threadID}}"/>

        <div class="input-group invis-input-group">
            <span class="input-group-addon">To:</span><input name="to" type="text" class="form-control" placeholder="You must choose at least one recipient."></input>
        </div>
        <div class="panel-body">
            <textarea name="body" class="invis-input">{{body}}</textarea>
        </div>
    </div>

    <input type="submit" class="js-send-button btn btn-default btn-lg" value="Send"></input>
</div>
</script>



<!-- CONTACTS -->
<script id="contacts-template" type="text/x-handlebars-template">
<div class="contacts">
    <h2>Contacts</h2>
    <ul>
        {{#each this}}
        <li>
        <input type="text" class="name" placeholder="(name)" value="{{name}}" />
        <input type="text" class="address" placeholder="(address)" value="{{address}}" />
        <input type="text" class="pubHash" placeholder="(key hash)" value="{{pubHash}}" disabled="true" />
        <a href="#" class="deleteButton">[X]</a>
        </li>
        {{/each}}
    </ul>
    <button class="addContactButton">Add Contact</button>
    <button class="saveContactsButton">Save</button>
</div>
</script>

<script id="new-contact-template" type="text/x-handlebars-template">
<li class="new">
<input type="text" class="name" placeholder="(name)"/>
<input type="text" class="address" placeholder="(email address)"/>
<a href="#" class="deleteButton">[X]</a>
</li>
</script>



<!-- KEYBOARD SHORTCUTS MODAL -->
<script id="kb-shortcuts-template" type="text/x-handlebars-template">
<div class="modal-bg">
<div class="modal" id="kbShortcutsModal">
    <h3>Keyboard shortcuts</h3>
    <section>
        <div><label>j</label>next email</div>
        <div><label>k</label>previous email</div>
        <div><label>y</label>archive</div>
        <div><label>r</label>reply</div>
        <div><label>a</label>reply to all</div>
        <div><label>f</label>forward</div>
        <div><label>g c</label>go to compose</div>
        <div><label>g i</label>go to inbox</div>
        <div><label>g s</label>go to sent mail</div>
        <div><label>g a</label>go to archive</div>
        <div><label>tab+enter</label>send email</div>
        <div><label>esc</label>close</div>
    </section>
    <a href="#" class="link-close-modal" >close</a>
</div>
</div>
</script>


<script type="text/javascript" src="/js/jquery.min.js"></script>
<script type="text/javascript" src="/js/jquery.cookie.js"></script>
<script type="text/javascript" src="/js/sugar.min.js"></script>
<script type="text/javascript" src="/js/moment.min.js"></script>
<script type="text/javascript" src="/js/handlebars.js"></script>
<script type="text/javascript" src="/js/openpgp.js"></script>
<script type="text/javascript" src="/js/scrypt.js"></script>
<script type="text/javascript" src="/js/app.js"></script>
<script type="text/javascript" src="/js/start.js"></script>
</body>
</html>
